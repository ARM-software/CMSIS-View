<!-- HTML header for doxygen 1.9.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CMSIS-View: Built-in functions</title>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="tabs.js"></script>
<script type="text/javascript" src="footer.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/javascript" src="darkmode_toggle.js"></script>
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="extra_navtree.css" rel="stylesheet" type="text/css"/>
<link href="extra_search.css" rel="stylesheet" type="text/css"/>
<link href="extra_tabs.css" rel="stylesheet" type="text/css"/>
<link href="version.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../version.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 55px;">
  <td id="projectlogo" style="padding: 1.5em;"><a href="https://www.keil.arm.com/cmsis" target="_blank"><img alt="Logo" src="cmsis_logo_white_small.png"/</a></td>
  <td style="padding-left: 1em; padding-bottom: 1em;padding-top: 1em;">
   <div id="projectname">CMSIS-View
   &#160;<span id="projectnumber"><script type="text/javascript">
     <!--
     writeHeader.call(this);
     writeVersionDropdown.call(this, "CMSIS-View");
     //-->
    </script>
   </span>
   </div>
   <div id="projectbrief">Record program events, display status information, and analyze execution faults</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
  <!--END !PROJECT_NAME-->
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<div id="CMSISnav" class="tabs1">
  <ul class="tablist">
    <script type="text/javascript">
      writeComponentTabs.call(this);
    </script>
  </ul>
</div>
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('builtin_function.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Built-in functions </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Read CPU register value.</p>
<p>The SCVD interpreter has the following built-in functions for calculation of stack memory usage, access to CPU registers and application program symbols.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Function Name   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="builtin_function.html#__CalcMemUsed">__CalcMemUsed</a>   </td><td class="markdownTableBodyNone">Provide memory usage information for stack area in user application program.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="builtin_function.html#__FindSymbol">__FindSymbol</a>   </td><td class="markdownTableBodyNone">Get address value of a symbol in user application program.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="builtin_function.html#__GetRegVal">__GetRegVal</a>   </td><td class="markdownTableBodyNone">Read the value of processor register from the target processor.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="builtin_function.html#__Offset_of">__Offset_of</a>   </td><td class="markdownTableBodyNone">Get offset of type member defined with the <a class="el" href="elem_typedefs.html#elem_typedef">typedef</a>.    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="builtin_function.html#__size_of">__size_of</a>   </td><td class="markdownTableBodyNone">Number of elements of an array defined by a symbol in user application.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="builtin_function.html#__Symbol_exists">__Symbol_exists</a>   </td><td class="markdownTableBodyNone">Check if a specific symbol exists in the user application program.   </td></tr>
</table>
<p>&#160;</p>
<h1><a class="anchor" id="__CalcMemUsed"></a>
__CalcMemUsed</h1>
<p>Provide memory usage information for stack area in user application program.</p>
<div class="fragment"><div class="line">uint32_t __CalcMemUsed  (uint32_t StackAddress, uint32_t StackSize, uint32_t FillPattern, uint32_t MagicValue)  </div>
</div><!-- fragment --> <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">StackAddress</td><td>Start address of memory area </td></tr>
    <tr><td class="paramname">StackSize</td><td>Size of memory area in Bytes </td></tr>
    <tr><td class="paramname">FillPattern</td><td>Initial value of memory area, used to identify memory usage </td></tr>
    <tr><td class="paramname">MagicValue</td><td>Initial value at start address of memory area, used to identify memory (stack) overflow</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A packed 32-bit integer value that indicates memory usage in bytes, in percent, and memory overflow:<ul>
<li>Bit <span class="XML-Token">0..19</span> Used memory in Bytes (how many bytes of <em><b>FillPattern</b> are</em> overwritten)</li>
<li>Bit <span class="XML-Token">20..28</span> Used memory in percent (how many percent of <em><b>FillPattern</b> are</em> overwritten)</li>
<li>Bit <span class="XML-Token">31</span> Memory overflow (<em><b>MagicValue</b> is</em> overwritten)</li>
</ul>
</dd></dl>
<p>The function provides information about the memory usage of a stack area and is typically applied to calculate the utilization of RTOS thread stacks. It assumes that the memory has been filled with a pattern value. Optionally there might be a value (called magic value) at the start of the memory that is used to detect stack overflows.</p>
<p><b>Example 1</b></p>
<p><b>C source file</b> </p><div class="fragment"><div class="line">uint32_t tstack[200/4];      <span class="comment">// 200 bytes stack space</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> StackTest (<span class="keywordtype">void</span>) {</div>
<div class="line">  uint32_t  i;</div>
<div class="line">  </div>
<div class="line">  memset (tstack, 0x8A, <span class="keyword">sizeof</span> (tstack));</div>
<div class="line">  tstack[0] = 0xE25A2EA5;</div>
<div class="line">  <span class="keywordflow">for</span> (i=(200/4)-1; i &gt;= 10; i--)  {</div>
<div class="line">    tstack[i] = i;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>*.SCVD file</b> </p><div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;utf-8&quot;</span>?&gt;</div>
<div class="line">&lt;component_viewer schemaVersion=<span class="stringliteral">&quot;0.1&quot;</span> xmlns:xs=<span class="stringliteral">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> xs:noNamespaceSchemaLocation=<span class="stringliteral">&quot;Component_Viewer.xsd&quot;</span>&gt;</div>
<div class="line">  &lt;component name=<span class="stringliteral">&quot;MyExample&quot;</span> version=<span class="stringliteral">&quot;1.0.0&quot;</span>/&gt;    &lt;!-- name and version of the component  --&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;objects&gt;</div>
<div class="line">    &lt;<span class="keywordtype">object</span> name=<span class="stringliteral">&quot;MyProgram&quot;</span>&gt;</div>
<div class="line">      &lt;var  name=<span class="stringliteral">&quot;StackStart&quot;</span>  type=<span class="stringliteral">&quot;int32_t&quot;</span> value=<span class="stringliteral">&quot;0&quot;</span>  /&gt;</div>
<div class="line">      &lt;var  name=<span class="stringliteral">&quot;StackSize&quot;</span>   type=<span class="stringliteral">&quot;int32_t&quot;</span> value=<span class="stringliteral">&quot;0&quot;</span>  /&gt;</div>
<div class="line">      &lt;var  name=<span class="stringliteral">&quot;StackUsage&quot;</span>  type=<span class="stringliteral">&quot;int32_t&quot;</span> value=<span class="stringliteral">&quot;0&quot;</span>  /&gt;</div>
<div class="line"> </div>
<div class="line">      &lt;calc&gt;</div>
<div class="line">        StackStart = __FindSymbol (<span class="stringliteral">&quot;tstack&quot;</span>);</div>
<div class="line">        StackSize  = __size_of (<span class="stringliteral">&quot;tstack&quot;</span>) * 4;</div>
<div class="line">        StackUsage = __CalcMemUsed (StackStart, StackSize, 0x8A8A8A8A, 0xE25A2EA5);</div>
<div class="line">      &lt;/calc&gt;</div>
<div class="line">   </div>
<div class="line">      &lt;out name=<span class="stringliteral">&quot;MyProgram&quot;</span>&gt;</div>
<div class="line">        &lt;item alert=<span class="stringliteral">&quot;(StackUsage &gt;&gt; 31)&quot;</span>    </div>
<div class="line">              <span class="keyword">property</span>=<span class="stringliteral">&quot;tstack @%x[StackStart] size=%x[StackSize]&quot;</span></div>
<div class="line">              value=<span class="stringliteral">&quot;Usage %x[StackUsage &amp;amp; 0xFFFFF] %d[(StackUsage&gt;&gt;20) &amp;amp; 0xFF]%%&quot;</span> /&gt;</div>
<div class="line">      &lt;/out&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">object</span>&gt;</div>
<div class="line">  &lt;/objects&gt;</div>
<div class="line">&lt;/component_viewer&gt;</div>
</div><!-- fragment --><p><b>Output</b> </p><div class="image">
<img src="CalcMemUsed.png" alt=""/>
</div>
<p><b>Example 2</b></p>
<p>Typical usage with an RTOS thread control block.</p>
<div class="fragment"><div class="line">&lt;component_viewer...&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;typedefs&gt;</div>
<div class="line">    &lt;!-- Task/Thread Control Block, debugger reads 52 bytes --&gt;</div>
<div class="line">    &lt;<span class="keyword">typedef</span> name=<span class="stringliteral">&quot;Thread_CB&quot;</span> info=<span class="stringliteral">&quot;RTOS Task Control Block&quot;</span> size=<span class="stringliteral">&quot;52&quot;</span>&gt;</div>
<div class="line">      :</div>
<div class="line">      &lt;member name=<span class="stringliteral">&quot;Stack&quot;</span>          type=<span class="stringliteral">&quot;uint32_t&quot;</span>       offset=<span class="stringliteral">&quot;44&quot;</span>  info=<span class="stringliteral">&quot;Pointer to Task Stack memory block&quot;</span>/&gt;</div>
<div class="line">      :</div>
<div class="line">  &lt;!-- Helper variables <span class="keywordflow">for</span> Stack-usage calculation --&gt;</div>
<div class="line">       &lt;var  name=<span class="stringliteral">&quot;StackSize&quot;</span>        type=<span class="stringliteral">&quot;uint32_t&quot;</span>    /&gt;</div>
<div class="line">       &lt;var  name=<span class="stringliteral">&quot;StkUse&quot;</span>           type=<span class="stringliteral">&quot;uint32_t&quot;</span>    /&gt;</div>
<div class="line">       &lt;var  name=<span class="stringliteral">&quot;BytesUsed&quot;</span>        type=<span class="stringliteral">&quot;uint32_t&quot;</span>    /&gt;</div>
<div class="line">       &lt;var  name=<span class="stringliteral">&quot;Percentage&quot;</span>       type=<span class="stringliteral">&quot;uint32_t&quot;</span>    /&gt;</div>
<div class="line">       &lt;var  name=<span class="stringliteral">&quot;StkOverflow&quot;</span>      type=<span class="stringliteral">&quot;int32_t&quot;</span>     /&gt;</div>
<div class="line">       &lt;var  name=<span class="stringliteral">&quot;ShowStackInfo&quot;</span>    type=<span class="stringliteral">&quot;int32_t&quot;</span>     /&gt;</div>
<div class="line">     &lt;/<span class="keyword">typedef</span>&gt;</div>
<div class="line">  &lt;/typedefs&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;/objects&gt;</div>
<div class="line">    &lt;<span class="keywordtype">object</span> name=<span class="stringliteral">&quot;Threads&quot;</span>&gt;</div>
<div class="line">       &lt;readlist name=<span class="stringliteral">&quot;TCB&quot;</span>    type=<span class="stringliteral">&quot;*Thread_CB&quot;</span>  symbol=<span class="stringliteral">&quot;os_TCB&quot;</span> based=<span class="stringliteral">&quot;1&quot;</span> count=<span class="stringliteral">&quot;10&quot;</span> init=<span class="stringliteral">&quot;1&quot;</span> /&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;!-- Stack Usage Calculation when watermark check is enabled (ShowStackInfo) --&gt;</div>
<div class="line">        &lt;calc cond=<span class="stringliteral">&quot;TCB[i].ShowStackInfo &amp;&amp; ((i != (TCB._count - 1)) &amp;&amp; ((stackinfo &gt;&gt; 28) &amp; 0x01))&quot;</span> &gt;</div>
<div class="line">          StkUse               = __CalcMemUsed (TCB[i].Stack, TCB[i].StackSize, 0xCCCCCCCC, 0xE25A2EA5);</div>
<div class="line">          TCB[i].StkOverflow   = (StkUse &amp; 0x80000000) ? 1 : 0;</div>
<div class="line">          TCB[i].StkUse       &amp;= ~0x80000000;</div>
<div class="line">          TCB[i].BytesUsed     = (StkUse &amp; 0xFFFFF);</div>
<div class="line">          TCB[i].Percentage    = (StkUse &gt;&gt; 20) &amp; 0xFF;</div>
<div class="line">        &lt;/calc&gt;</div>
<div class="line">     &lt;/<span class="keywordtype">object</span>&gt;</div>
<div class="line">  &lt;/objects&gt;</div>
<div class="line">&lt;/component_viewer&gt;</div>
</div><!-- fragment --><p>&#160;</p>
<h1><a class="anchor" id="__FindSymbol"></a>
__FindSymbol</h1>
<p>Get address value of a symbol in the user application program.</p>
<div class="fragment"><div class="line">int32_t __FindSymbol (symbol_name)</div>
</div><!-- fragment --> <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">symbol_name</td><td>Reference to a <a class="el" href="Symbol_Access.html">symbol</a> (examples: "main", "os_active_TCB", "tasks.c/xSchedulerRunning"). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><span class="XML-Token">address value</span> Address of the symbol.</dd></dl>
<p>The function searches for a symbol and returns the address value of the symbol in the user application.</p>
<dl class="section note"><dt>Note</dt><dd>If the symbol cannot be found, then an error in the <a href="https://developer.arm.com/documentation/101407/latest/Debugging/Debug-Windows-and-Dialogs/Component-Viewer" target="_blank"><b>Component Viewer</b></a> is displayed.</dd></dl>
<p><b>C source file</b> </p><div class="fragment"><div class="line">uint32_t tstack[200/4];      <span class="comment">// 200 bytes stack space</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> StackTest (<span class="keywordtype">void</span>) {</div>
<div class="line">  uint32_t  i;</div>
<div class="line">  </div>
<div class="line">  memset (tstack, 0x8A, <span class="keyword">sizeof</span> (tstack));</div>
<div class="line">  tstack[0] = 0xE25A2EA5;</div>
<div class="line">  <span class="keywordflow">for</span> (i=(200/4)-1; i &gt;= 10; i--)  {</div>
<div class="line">    tstack[i] = i;</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p><b>*.SCVD file</b> </p><div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;utf-8&quot;</span>?&gt;</div>
<div class="line">&lt;component_viewer schemaVersion=<span class="stringliteral">&quot;0.1&quot;</span> xmlns:xs=<span class="stringliteral">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span> xs:noNamespaceSchemaLocation=<span class="stringliteral">&quot;Component_Viewer.xsd&quot;</span>&gt;</div>
<div class="line">  &lt;component name=<span class="stringliteral">&quot;MyExample&quot;</span> version=<span class="stringliteral">&quot;1.0.0&quot;</span>/&gt;    &lt;!-- name and version of the component  --&gt;</div>
<div class="line"> </div>
<div class="line">  &lt;objects&gt;</div>
<div class="line">    &lt;<span class="keywordtype">object</span> name=<span class="stringliteral">&quot;MyProgram&quot;</span>&gt;</div>
<div class="line">      &lt;var  name=<span class="stringliteral">&quot;StackStart&quot;</span>  type=<span class="stringliteral">&quot;int32_t&quot;</span> value=<span class="stringliteral">&quot;0&quot;</span>  /&gt;</div>
<div class="line">      &lt;var  name=<span class="stringliteral">&quot;StackSize&quot;</span>   type=<span class="stringliteral">&quot;int32_t&quot;</span> value=<span class="stringliteral">&quot;0&quot;</span>  /&gt;</div>
<div class="line">      &lt;var  name=<span class="stringliteral">&quot;StackUsage&quot;</span>  type=<span class="stringliteral">&quot;int32_t&quot;</span> value=<span class="stringliteral">&quot;0&quot;</span>  /&gt;</div>
<div class="line"> </div>
<div class="line">      &lt;calc&gt;</div>
<div class="line">        StackStart = __FindSymbol (<span class="stringliteral">&quot;tstack&quot;</span>);</div>
<div class="line">        StackSize  = __size_of (<span class="stringliteral">&quot;tstack&quot;</span>) * 4;</div>
<div class="line">        StackUsage = __CalcMemUsed (StackStart, StackSize, 0x8A8A8A8A, 0xE25A2EA5);</div>
<div class="line">      &lt;/calc&gt;</div>
<div class="line">   </div>
<div class="line">      &lt;out name=<span class="stringliteral">&quot;MyProgram&quot;</span>&gt;</div>
<div class="line">        &lt;item alert=<span class="stringliteral">&quot;(StackUsage &gt;&gt; 31)&quot;</span>    </div>
<div class="line">              <span class="keyword">property</span>=<span class="stringliteral">&quot;tstack @%x[StackStart] size=%x[StackSize]&quot;</span></div>
<div class="line">              value=<span class="stringliteral">&quot;Usage %x[StackUsage &amp;amp; 0xFFFFF] %d[(StackUsage&gt;&gt;20) &amp;amp; 0xFF]%%&quot;</span> /&gt;</div>
<div class="line">      &lt;/out&gt;</div>
<div class="line">    &lt;/<span class="keywordtype">object</span>&gt;</div>
<div class="line">  &lt;/objects&gt;</div>
<div class="line">&lt;/component_viewer&gt;</div>
</div><!-- fragment --><p><b>Output</b> </p><div class="image">
<img src="CalcMemUsed.png" alt=""/>
</div>
<p>&#160;</p>
<h1><a class="anchor" id="__GetRegVal"></a>
__GetRegVal</h1>
<p>__GetRegVal | Read the value of processor register from the target processor.</p>
<div class="fragment"><div class="line">uint32_t __GetRegVal (<span class="keywordtype">char</span> * RegisterName)</div>
</div><!-- fragment --> <dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">RegisterName</td><td>Pointer to the name of a CPU register: "PSP", "MSP", .... </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Value of the CPU register</dd></dl>
<p>The function reads the value of a CPU register.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Register Name   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">R0 - R12   </td><td class="markdownTableBodyNone">General-purpose registers    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">R13   </td><td class="markdownTableBodyNone">Stack pointer (SP)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">R14   </td><td class="markdownTableBodyNone">Link Register (LR)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">R15   </td><td class="markdownTableBodyNone">Program Counter (PC)    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">XPSR   </td><td class="markdownTableBodyNone">Combined Program Status Register    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">MSP   </td><td class="markdownTableBodyNone">Main Stack Pointer    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PSP   </td><td class="markdownTableBodyNone">Process Stack Pointer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">BASEPRI   </td><td class="markdownTableBodyNone">Base Priority Mask Register    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">PRIMASK   </td><td class="markdownTableBodyNone">Exception Mask Register    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">FAULTMASK   </td><td class="markdownTableBodyNone">Fault Mask Register    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">CONTROL   </td><td class="markdownTableBodyNone">Control Register   </td></tr>
</table>
<p>Domain specifier <span class="XML-Token">x</span> is required on ARMv8-M architecture for some registers to specify Non-Secure (<span class="XML-Token">x=NS</span>) or Secure (<span class="XML-Token">x=S</span>) access domain. Names of these registers then become as follows:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Register Name   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">MSP_<span class="XML-Token">x</span>   </td><td class="markdownTableBodyNone">Main Stack Pointer    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PSP_<span class="XML-Token">x</span>   </td><td class="markdownTableBodyNone">Process Stack Pointer    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">MSPLIM_<span class="XML-Token">x</span>   </td><td class="markdownTableBodyNone">Main Stack Pointer Limit Register    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PSPLIM_<span class="XML-Token">x</span>   </td><td class="markdownTableBodyNone">Process Stack Pointer Limit Register    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">BASEPRI_<span class="XML-Token">x</span>   </td><td class="markdownTableBodyNone">Base Priority Mask Register    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">PRIMASK_<span class="XML-Token">x</span>   </td><td class="markdownTableBodyNone">Exception Mask Register    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FAULTMASK_<span class="XML-Token">x</span>   </td><td class="markdownTableBodyNone">Fault Mask Register    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">CONTROL_<span class="XML-Token">x</span>   </td><td class="markdownTableBodyNone">Control Register   </td></tr>
</table>
<p><b>Example:</b> </p><div class="fragment"><div class="line">&lt;objects&gt;</div>
<div class="line">  &lt;<span class="keywordtype">object</span> name=<span class="stringliteral">&quot;CPU Registers&quot;</span>&gt;</div>
<div class="line">    &lt;var name=<span class="stringliteral">&quot;R0&quot;</span>   type=<span class="stringliteral">&quot;uint32_t&quot;</span> value=<span class="stringliteral">&quot;0&quot;</span>/&gt; </div>
<div class="line">    &lt;var name=<span class="stringliteral">&quot;R1&quot;</span>   type=<span class="stringliteral">&quot;uint32_t&quot;</span> value=<span class="stringliteral">&quot;0&quot;</span>/&gt; </div>
<div class="line">    &lt;var name=<span class="stringliteral">&quot;R2&quot;</span>   type=<span class="stringliteral">&quot;uint32_t&quot;</span> value=<span class="stringliteral">&quot;0&quot;</span>/&gt; </div>
<div class="line">    &lt;var name=<span class="stringliteral">&quot;R3&quot;</span>   type=<span class="stringliteral">&quot;uint32_t&quot;</span> value=<span class="stringliteral">&quot;0&quot;</span>/&gt; </div>
<div class="line">    &lt;var name=<span class="stringliteral">&quot;XPSR&quot;</span> type=<span class="stringliteral">&quot;uint32_t&quot;</span> value=<span class="stringliteral">&quot;0&quot;</span>/&gt; </div>
<div class="line">    </div>
<div class="line">    &lt;!-- ARMv8M registers --&gt;</div>
<div class="line">    &lt;var name=<span class="stringliteral">&quot;PSP_NS&quot;</span>      type=<span class="stringliteral">&quot;uint32_t&quot;</span> value=<span class="stringliteral">&quot;0&quot;</span>/&gt; </div>
<div class="line">    &lt;var name=<span class="stringliteral">&quot;PSP_S&quot;</span>       type=<span class="stringliteral">&quot;uint32_t&quot;</span> value=<span class="stringliteral">&quot;0&quot;</span>/&gt; </div>
<div class="line">    </div>
<div class="line">    &lt;!-- Read registers --&gt;</div>
<div class="line">    &lt;calc&gt;</div>
<div class="line">      R0  = __GetRegVal (<span class="stringliteral">&quot;R0&quot;</span>);</div>
<div class="line">      R1  = __GetRegVal (<span class="stringliteral">&quot;R1&quot;</span>);</div>
<div class="line">      R2  = __GetRegVal (<span class="stringliteral">&quot;R2&quot;</span>);</div>
<div class="line">      R3  = __GetRegVal (<span class="stringliteral">&quot;R3&quot;</span>);</div>
<div class="line">      XPSR = __GetRegVal (<span class="stringliteral">&quot;XPSR&quot;</span>);</div>
<div class="line">    &lt;/calc&gt;</div>
<div class="line">    </div>
<div class="line">    &lt;calc cond=<span class="stringliteral">&quot;NonSecure&quot;</span>&gt;</div>
<div class="line">      PSP_NS = __GetRegVal (<span class="stringliteral">&quot;PSP_NS&quot;</span>);</div>
<div class="line">    &lt;/calc&gt;</div>
<div class="line">    </div>
<div class="line">    &lt;calc cond=<span class="stringliteral">&quot;Secure&quot;</span>&gt;</div>
<div class="line">      PSP_S = __GetRegVal (<span class="stringliteral">&quot;PSP_S&quot;</span>);</div>
<div class="line">    &lt;/calc&gt;</div>
<div class="line">    </div>
<div class="line">  &lt;/<span class="keywordtype">object</span>&gt;</div>
<div class="line">&lt;/objects&gt;</div>
</div><!-- fragment --><h1><a class="anchor" id="__Symbol_exists"></a>
__Symbol_exists</h1>
<div class="fragment"><div class="line">int32_t __Symbol_exists (symbol_name)</div>
</div><!-- fragment --><p>Search for symbol </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">symbol_name</td><td>Reference to a <a class="el" href="Symbol_Access.html">symbol</a> (examples: "main", "os_active_TCB", "tasks.c/xSchedulerRunning"). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><br  />
<ul>
<li><span class="XML-Token">1</span> for true - symbol present in user application</li>
<li><span class="XML-Token">0</span> for false - symbol not found</li>
</ul>
</dd></dl>
<p>The function searches for a debug symbol in the loaded user application.</p>
<p>and returns <span class="XML-Token">1</span> when the symbol was found, otherwise <span class="XML-Token">0</span> for false. &#160;</p>
<h1><a class="anchor" id="__Offset_of"></a>
__Offset_of</h1>
<div class="fragment"><div class="line">uint32_t __Offset_of (typedef_mem_name)</div>
</div><!-- fragment --><p>Get offset of type member </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">typedef_mem_name</td><td>Is the member name of a specified type and has the form <em>typedef_name:typedef_member_name</em>. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The offset value of the specified typedef member.</dd></dl>
<p>The function returns the offset value of the specified typedef member. When using a <a class="el" href="elem_typedefs.html">&lt;typedef&gt;</a> element with the <em>import</em> attribute, __Offset_of returns for members that are defined in the SCVD file but not present in the compiled image the value -1. The value -1 indicates that a member does not exist in the image.</p>
<p><b>Example:</b> </p><div class="fragment"><div class="line">__Offset_of (Thread_CB:Task_ID)</div>
</div><!-- fragment --><h1><a class="anchor" id="__size_of"></a>
__size_of</h1>
<div class="fragment"><div class="line">int32_t __size_of (symbol_name)</div>
</div><!-- fragment --><p>Number of elements of an array defined by a symbol in user application </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">symbol_name</td><td>Reference to a <a class="el" href="Symbol_Access.html">symbol</a> (examples: "main", "os_active_TCB", "tasks.c/xSchedulerRunning"). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>number of elements of an array defined in a user application</dd></dl>
<p>The function searches for a debug symbol in the loaded user application. If the symbol is found it returns the number of elements of an array that is addressed by this symbol. If the symbol is not found, an error message is displayed.</p>
<p><b>Example:</b> </p>
<p>User application code (file MyTest.c): </p><div class="fragment"><div class="line"><span class="keyword">struct </span>{</div>
<div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>   c0;</div>
<div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>   c1;</div>
<div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>     i;</div>
<div class="line">} MyList [20];</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> MyVar[10];  </div>
</div><!-- fragment --><p>The following statements in the SCVD file output the number of elements of each variable. For 'MyList' the value is 20. The value 20 for 'MyVar' is only displayed when the variable exists.</p>
<div class="fragment"><div class="line">&lt;out name=<span class="stringliteral">&quot;MyTest&quot;</span>&gt;</div>
<div class="line">  &lt;item <span class="keyword">property</span>=<span class="stringliteral">&quot;Elements of &#39;MyList&#39;&quot;</span>   value=<span class="stringliteral">&quot;%d[__size_of(&amp;quot;MyList&amp;quot;)]&quot;</span>/&gt;</div>
<div class="line">  &lt;item cond=<span class="stringliteral">&quot;__Symbol_exists(&amp;quot;MyTest.c/MyVar&amp;quot;)&quot;</span>  <span class="keyword">property</span>=<span class="stringliteral">&quot;Elements of &#39;MyVar&#39;&quot;</span>    value=<span class="stringliteral">&quot;%d[__size_of(&amp;quot;MyTest.c/MyVar&amp;quot;)]&quot;</span>/&gt;</div>
<div class="line">&lt;/out&gt;</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      <script type="text/javascript">
        <!--
        writeFooter.call(this);
        //-->
      </script> 
    </li>
  </ul>
</div>
</body>
</html>
