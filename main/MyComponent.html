<!-- HTML header for doxygen 1.9.2-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CMSIS-View: SCVD in MyComponent</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="footer.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="extra_stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="version.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../version.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 55px;">
  <td id="projectlogo" style="padding: 1.5em;"><img alt="Logo" src="cmsis_logo_white_small.png"/></td>
  <td style="padding-left: 1em; padding-bottom: 1em;padding-top: 1em;">
   <div id="projectname">CMSIS-View
   &#160;<span id="projectnumber"><script type="text/javascript">
     <!--
     writeHeader.call(this);
     writeVersionDropdown(this);
     //-->
    </script>
   </span>
   </div>
   <div id="projectbrief">Debugger Views for Status and Event Information</div>
  </td>
  <!--END !PROJECT_NAME-->
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('MyComponent.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">SCVD in MyComponent </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >MyComponent implements a data transfer using the functions <code>MyComp_initialize</code>, <code>MyComp_send</code>, and <code>MyComp_receive</code>. During operation, the component calls event functions that provide event data for recording by the Event Recorder.</p>
<p >This example shows how to:</p><ul>
<li><a class="el" href="MyComponent.html#add_event_annotations">add event annotations</a> to a software component</li>
<li><a class="el" href="MyComponent.html#create_scvd">create an SCVD file</a> for status and event displays in the MDK debugger</li>
<li><a class="el" href="MyComponent.html#create_doxy">create Doxygen documentation</a> that utilizes the MDK context help system</li>
<li><a class="el" href="MyComponent.html#create_pack">create a software pack</a> using the CMSIS-Pack standard</li>
</ul>
<h1><a class="anchor" id="add_event_annotations"></a>
Add Event Annotations</h1>
<p >It is possible to add <a class="el" href="er_use.html#Event_Annotations">Event Annotations</a> pragmatical as explained in the section <a class="el" href="er_use.html">Using Event Recorder</a>. However, for more complex software components, it makes sense to use a structured approach as described in the following.</p>
<p >Event annotation should deliver meaningful information about the dynamic execution of a software component and can be grouped into the following categories using level information in the <a class="el" href="group__EventRecorder__Data.html#ga44fa52e2007e535753fd4ba59b84d55d">EventID</a>.</p><ul>
<li><a class="el" href="group__EventRecorder__leveldefs.html#ga09458e6018228f12b87671342e77545c">EventLevelError</a> indicates when an event relates to run-time errors in the component.</li>
<li><a class="el" href="group__EventRecorder__leveldefs.html#ga804697e938a79b0ea388872951ed7b06">EventLevelAPI</a> should be used when an event relates to API function calls.</li>
<li><a class="el" href="group__EventRecorder__leveldefs.html#ga45955a55988126e124b2c6595812c9f4">EventLevelOp</a> refers to events that related to internal operations.</li>
<li><a class="el" href="group__EventRecorder__leveldefs.html#gae594d8dae31ac1ffd04464f4af4a20ea">EventLevelDetail</a> allows to provided events with additional detailed information of operations.</li>
</ul>
<p >Instead of using the general purpose <a class="el" href="group__EventRecorder__Data.html">Event Data Recording</a> functions, specify component specific functions that can be tagged with an <a class="el" href="group__EventRecorder__Data.html#ga44fa52e2007e535753fd4ba59b84d55d">EventID</a>. These component specific functions are calling then the <a class="el" href="group__EventRecorder__Data.html">Event Data Recording</a> functions.</p>
<p >The event recorder functions for the MyComponent software component are using severity level information in their <a class="el" href="group__EventRecorder__Data.html#ga44fa52e2007e535753fd4ba59b84d55d">EventIDs</a> (refer to the file EvrMyComponent.h in the example project):</p>
<div class="fragment"><div class="line">#define EvtMyCo_No 0x0A     /// &lt; Number of the component with short name &#39;EvtMyCo_No&#39;</div>
<div class="line"> </div>
<div class="line">// Event id list for &quot;MyComponent&quot;</div>
<div class="line">#define EvtMyCo_InitEntry         EventID (EventLevelAPI,   EvtMyCo_No, 0x00)</div>
<div class="line">#define EvtMyCo_InitStatus        EventID (EventLevelAPI,   EvtMyCo_No, 0x01)</div>
<div class="line">#define EvtMyCo_SendNoData        EventID (EventLevelError, EvtMyCo_No, 0x0A)</div>
<div class="line">#define EvtMyCo_SendComplete      EventID (EventLevelOp,    EvtMyCo_No, 0x0B)</div>
<div class="line">#define EvtMyCo_SendFailed        EventID (EventLevelError, EvtMyCo_No, 0x0C)</div>
<div class="line">#define EvtMyCo_ReceiveNoData     EventID (EventLevelError, EvtMyCo_No, 0x15)</div>
<div class="line">#define EvtMyCo_ReceiveComplete   EventID (EventLevelAPI,   EvtMyCo_No, 0x16)</div>
<div class="line">#define EvtMyCo_ReceiveFailed     EventID (EventLevelError, EvtMyCo_No, 0x17)</div>
</div><!-- fragment --><p >The <a class="el" href="group__EventRecorder__Data.html#ga44fa52e2007e535753fd4ba59b84d55d">EventID</a> also contains information about the component number (to identify the event) and the specific message number that is used to display additional information in the Event Recorder window.</p>
<h1><a class="anchor" id="create_scvd"></a>
Create an SCVD file</h1>
<p >The SCVD file for MyComponent uses this message number information to display the correct messages in Event Recorder.</p>
<div class="fragment"><div class="line">&lt;!-- event list for MyComponent --&gt;</div>
<div class="line">    &lt;events&gt;   </div>
<div class="line">      &lt;group&gt;</div>
<div class="line">        &lt;component name=&quot;MyComponent&quot;  brief=&quot;MyCo&quot;    no=&quot;0x0A&quot;  prefix=&quot;EvrMyCo_&quot;     info=&quot;My Component - Demo example&quot;/&gt;</div>
<div class="line">      &lt;/group&gt;</div>
<div class="line">      &lt;event id=&quot;0xA00&quot; level=&quot;API&quot;    property=&quot;InitEntry&quot;                             info=&quot;Event on MyComp_initialize start&quot;/&gt;</div>
<div class="line">      &lt;event id=&quot;0xA01&quot; level=&quot;API&quot;    property=&quot;InitStatus&quot;                            info=&quot;Event on MyComp_initialize return&quot;/&gt;</div>
<div class="line">      &lt;event id=&quot;0xA0A&quot; level=&quot;Error&quot;  property=&quot;SendNoData&quot;                            info=&quot;Event on MyComp_initialize return&quot;/&gt;</div>
<div class="line">      &lt;event id=&quot;0xA0B&quot; level=&quot;Op&quot;     property=&quot;SendComplete&quot;    value=&quot;size=%d[val1]&quot; info=&quot;Event on MyComp_send - completed&quot;/&gt;</div>
<div class="line">      &lt;event id=&quot;0xA0C&quot; level=&quot;Error&quot;  property=&quot;SendFailed&quot;      value=&quot;&quot;              info=&quot;Event on MyComp_send - send failed&quot;/&gt;</div>
<div class="line">      &lt;event id=&quot;0xA15&quot; level=&quot;Error&quot;  property=&quot;ReceiveNoData&quot;   value=&quot;&quot;              info=&quot;Event on MyComp_receive - no data received&quot;/&gt;</div>
<div class="line">      &lt;event id=&quot;0xA16&quot; level=&quot;Op&quot;     property=&quot;ReceiveComplete&quot; value=&quot;size=%d[val1]&quot; info=&quot;Event on MyComp_receive - completed&quot;/&gt;</div>
<div class="line">      &lt;event id=&quot;0xA17&quot; level=&quot;Error&quot;  property=&quot;ReceiveFailed&quot;   value=&quot;&quot;              info=&quot;Event on MyComp_receive - receive failed&quot;/&gt;</div>
<div class="line">  &lt;/events&gt;</div>
</div><!-- fragment --><p ><br  />
</p>
<p ><img src="MyComponentEvents_withAnnotations.png" alt="" class="inline" title="Event Recorder displaying the event annotations"/></p>
<h1><a class="anchor" id="create_doxy"></a>
Generate documentation</h1>
<p >Software components are frequently a black-box to the application programmer and event annotations need additional descriptions that interlinks with API related documentation.</p>
<p ><a href="https://doxygen.nl/">Doxygen</a> is frequently used to generate API documentation. Using this approach, event annotations can be documented in a similar way. Once the software component is framed as a <a class="el" href="MyComponent.html#create_pack">CMSIS-Pack</a>, the documentation for event annotations opens using hyperlinks in the Event Recorder.</p>
<p >A full documentation of the software component is available in the software pack that is built in the next step. You will find the Doxygen source code in ./SCVD_Examples/MyComponent/Doxygen. Run the script <code>gen_doc.bat</code> to create the documentation.</p>
<h1><a class="anchor" id="create_pack"></a>
Create a pack</h1>
<p ><a href="https://open-cmsis-pack.github.io/Open-CMSIS-Pack-Spec/main/html/index.html">Open-CMSIS-Pack</a> describes a mechanism to deliver software components, device parameters, and evaluation board support. The XML-based package description file (PDSC) describes the content of a software pack (file collection) that may include:</p><ul>
<li>Source code, header files, and software libraries</li>
<li>Documentation and source code templates</li>
<li>Device parameters along with startup code and programming algorithms</li>
<li>Example projects</li>
</ul>
<p >For the software component "MyComponent", as pack is available in the directory ./SCVD_Examples/MyComponent_Pack. Double-click MyVendor.MyComponent.1.0.0.pack to install it on your system. It contains one software component called :MyVendor:MyComponent with related documentation.</p>
<div class="image">
<img src="mycomponent.png" alt=""/>
<div class="caption">
MyComponent in the Manage Run-time Environment window</div></div>
<p >The PDSC file is very simple. It declares a single software component that comes with source files, SCVD and HTML documentation: </p><div class="fragment"><div class="line">&lt;component Cclass=&quot;MyVendor&quot; Cgroup=&quot;MyComponent&quot; Cversion=&quot;1.0.0&quot; condition=&quot;Cortex-M Device&quot;&gt;</div>
<div class="line">  &lt;description&gt;MyComponent software component example&lt;/description&gt;</div>
<div class="line">  &lt;files&gt;</div>
<div class="line">    &lt;file category=&quot;header&quot; name=&quot;Source/MyComponent.h&quot;/&gt;</div>
<div class="line">    &lt;file category=&quot;source&quot; name=&quot;Source/MyComponent.c&quot;/&gt;</div>
<div class="line">    &lt;file category=&quot;doc&quot;    name=&quot;html/index.html&quot;/&gt;</div>
<div class="line">    &lt;file category=&quot;other&quot;  name=&quot;Source/MyComponent.scvd&quot;/&gt;</div>
<div class="line">  &lt;/files&gt;</div>
<div class="line">&lt;/component&gt;</div>
</div><!-- fragment --><p >An example project called "MyComponent Pack Example" is also part of the pack. It is basically the same example as <a class="el" href="MyComponent.html">SCVD in MyComponent</a>, only that it is using the "MyComponent" software component.</p>
<p >If you build and run the example, you will see that the events that are recorded now contain hyperlinks that bring up the related documentation.</p>
<p ><img src="er_doxygen_links.png" alt="" class="inline" title="Event recorder links to related documentation"/></p>
<p >With this, you can create re-usable software components that can be equipped with Event Recorder information and related documentation. This is useful if you intend to share the software component within your company or with third parties. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      <script type="text/javascript">
        <!--
        writeFooter.call(this);
        //-->
      </script> 
    </li>
  </ul>
</div>
</body>
</html>
